<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  
</head>
<body>
  
</body>
</html>
<script>
    //按字符为标准卡位置，但按字节卡字数
    let len = (str,num)=>{
        let reg = /[^\x00-\xff]/;
        let a = str.split('');
        let A = 0;   //记录字节
        let B = 0;   //记录字符
        let b = a.map((item,index)=>{
            if(A>=num*2){
                return ;
            }else{
                if(reg.test(item)){
                    A+=2;
                    B+=1;
                }else{
                    A+=1;
                    B+=1;
                }
            }
        })
        a.length= B;
        let c = a.join('')+'...';
        return c;
    }
    console.log(len('asdsf啊撒旦解放',5))
</script>